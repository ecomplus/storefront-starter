(window.webpackJsonp=window.webpackJsonp||[]).push([[31],{233:function(o,t,e){"use strict";e.r(t);e(8),e(3),e(15);var n=e(5),i=e(40),a=e(30),s=e(121);window._info=window._info||{};const r=[],c=Array.isArray(window.modulesToFetch)?window.modulesToFetch:[{endpoint:"list_payments"},{endpoint:"calculate_shipping"}];if(Object.keys(s.b).length||s.a){const{resource:o,body:t}=window.storefront&&window.storefront.context||{},e={utm:s.b};t&&t._id&&"products"===o&&(e.items=[{product_id:t._id,categories:t.categories,quantity:1,price:Object(i.a)(t)}]),s.a&&(e.discount_coupon=s.a),c.push({endpoint:"apply_discount",reqOptions:{method:"post",data:e}})}c.forEach((({endpoint:o,reqOptions:t})=>{const e={};window._info[o]=e;const i=new Promise((i=>{Object(n.c)({url:`/${o}.json`,...t,axiosConfig:{timeout:1e4}}).then((({data:t})=>{const{result:n}=t;Array.isArray(n)&&n.forEach((({error:t,response:n})=>{if(!t){let t,i;switch(o){case"calculate_shipping":t="free_shipping_from_value",i=n[t],"number"==typeof i&&(void 0===e[t]||i<e[t])&&(e[t]=i);break;case"list_payments":t="installments_option",i=n[t],i&&(!e[t]||i.monthly_interest<e[t].monthly_interest||i.max_number>e[t].max_number)&&(e[t]=i),t="discount_option",i=n[t],i&&(!e[t]||i.value>e[t].value)&&n.payment_gateways.forEach((({discount:o})=>{o&&"freight"!==o.apply_at&&o.value===i.value&&(e[t]={apply_at:o.apply_at,...i})})),t="loyalty_points_programs",i=n[t],i&&(e[t]={...e[t],...i});break;default:t="available_extra_discount",i=n[t],i&&(!e[t]||i.value>e[t].value)&&(e[t]=i)}}})),a.a.emit(`info:${o}`,e)})).catch((t=>{console.error(t),a.a.emit(`info:${o}`,t)})).finally(i)}));r.push(i)})),Promise.all(r).then((()=>a.a.emit("info",window._info)))}}]);